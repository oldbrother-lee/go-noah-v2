# 数据库权限菜单设计方案

## 一、当前问题

在"数据库管理"菜单下，权限相关的子菜单过多，导致菜单结构混乱：

**当前菜单结构：**
```
数据库管理
├── 环境管理
├── 数据库配置
├── 数据库权限          ← 权限相关
├── 权限模板            ← 权限相关
├── 权限组              ← 权限相关
└── 角色权限            ← 权限相关
```

**问题：**
1. 权限相关菜单有4个，占据大部分菜单项
2. 菜单层级扁平，没有分类
3. 用户难以快速找到需要的功能

---

## 二、设计方案

### 方案一：权限功能合并（推荐）

将权限相关的功能合并到一个"权限管理"子菜单下：

```
数据库管理
├── 环境管理
├── 数据库配置
└── 权限管理              ← 新增二级菜单
    ├── 用户权限          ← 原"数据库权限"
    ├── 权限模板
    ├── 权限组
    └── 角色权限
```

**优点：**
- 权限功能集中管理，结构清晰
- 减少一级菜单数量
- 符合功能分组原则

**缺点：**
- 需要多点击一次才能进入权限管理

### 方案二：权限功能整合到单个页面

将权限模板、权限组、角色权限整合到一个页面，使用 Tab 切换：

```
数据库管理
├── 环境管理
├── 数据库配置
└── 权限管理              ← 单个页面，内部用 Tab
    ├── Tab: 用户权限
    ├── Tab: 权限模板
    ├── Tab: 权限组
    └── Tab: 角色权限
```

**优点：**
- 菜单最简洁
- 权限功能集中在一个页面

**缺点：**
- 页面复杂度较高
- 不适合权限功能较多的情况

### 方案三：保持现状，优化排序

保持当前结构，但优化菜单顺序和命名：

```
数据库管理
├── 环境管理              ← 基础配置
├── 数据库配置            ← 基础配置
└── 权限管理              ← 权限相关（合并）
    ├── 用户权限
    ├── 权限模板
    ├── 权限组
    └── 角色权限
```

---

## 三、推荐方案：方案一

### 3.1 菜单结构

```
数据库管理
├── 环境管理              (order: 1)
├── 数据库配置            (order: 2)
└── 权限管理              (order: 3) - 新增二级菜单
    ├── 用户权限          (order: 1) - 原"数据库权限"
    ├── 权限模板          (order: 2)
    ├── 权限组            (order: 3)
    └── 角色权限          (order: 4)
```

### 3.2 路由结构

```
/system/database
├── /system/database/environment
├── /system/database/config
└── /system/database/permission        ← 新增权限管理父路由（可选，或直接使用子路由）
    ├── /system/database/permission/user        ← 原 /system/database/permission
    ├── /system/database/permission/template    ← 原 /system/database/permission-template
    ├── /system/database/permission/group       ← 原 /system/database/permission-group
    └── /system/database/permission/role        ← 原 /system/database/role-permission
```

### 3.3 实现方式

**方式A：创建权限管理父路由（推荐）**
- 创建一个权限管理父路由，作为容器
- 子路由作为实际功能页面

**方式B：直接使用子路由**
- 不创建父路由页面
- 权限管理作为目录菜单，点击展开子菜单

---

## 四、实施建议

### 4.1 推荐使用方式B（目录菜单）

**原因：**
1. 不需要创建额外的父页面
2. 菜单结构更清晰
3. 用户体验更好（点击直接进入功能页面）

**路由配置：**
```typescript
{
  name: 'system_database_permission',
  path: '/system/database/permission',
  component: 'layout.base',  // 或使用空组件
  meta: {
    title: 'system_database_permission',
    i18nKey: 'route.system_database_permission',
    icon: 'mdi:shield-account',
    order: 3
  },
  children: [
    {
      name: 'system_database_permission_user',
      path: '/system/database/permission/user',
      component: 'view.system_database_permission',
      meta: {
        title: 'system_database_permission_user',
        i18nKey: 'route.system_database_permission_user',
        icon: 'mdi:account',
        order: 1
      }
    },
    {
      name: 'system_database_permission_template',
      path: '/system/database/permission/template',
      component: 'view.system_database_permission-template',
      meta: {
        title: 'system_database_permission_template',
        i18nKey: 'route.system_database_permission_template',
        icon: 'mdi:file-document-edit',
        order: 2
      }
    },
    {
      name: 'system_database_permission_group',
      path: '/system/database/permission/group',
      component: 'view.system_database_permission-group',
      meta: {
        title: 'system_database_permission_group',
        i18nKey: 'route.system_database_permission_group',
        icon: 'mdi:folder-multiple',
        order: 3
      }
    },
    {
      name: 'system_database_permission_role',
      path: '/system/database/permission/role',
      component: 'view.system_database_role-permission',
      meta: {
        title: 'system_database_permission_role',
        i18nKey: 'route.system_database_permission_role',
        icon: 'mdi:account-key',
        order: 4
      }
    }
  ]
}
```

---

## 五、国际化配置

需要添加以下国际化键：

```typescript
route: {
  // ...
  system_database_permission: '权限管理',
  system_database_permission_user: '用户权限',
  system_database_permission_template: '权限模板',
  system_database_permission_group: '权限组',
  system_database_permission_role: '角色权限',
}
```

---

## 六、迁移影响

### 6.1 路由变更

**旧路由 → 新路由：**
- `/system/database/permission` → `/system/database/permission/user`
- `/system/database/permission-template` → `/system/database/permission/template`
- `/system/database/permission-group` → `/system/database/permission/group`
- `/system/database/role-permission` → `/system/database/permission/role`

### 6.2 前端代码影响

1. **路由跳转**：需要更新所有跳转到这些页面的代码
2. **菜单配置**：需要更新路由配置
3. **国际化**：需要更新国际化键名

### 6.3 后端影响

**无影响**：后端 API 路径不变，只是前端路由调整

---

## 七、实施步骤

1. ✅ 创建菜单设计方案文档（本文档）
2. ⏳ 更新路由配置（合并权限相关菜单）
3. ⏳ 更新国际化配置
4. ⏳ 更新前端路由跳转代码
5. ⏳ 测试菜单显示和路由跳转

---

## 八、其他优化建议

### 8.1 菜单图标优化

- **权限管理**：`mdi:shield-account` 或 `mdi:shield-lock`
- **用户权限**：`mdi:account-key`
- **权限模板**：`mdi:file-document-edit`
- **权限组**：`mdi:folder-multiple`
- **角色权限**：`mdi:account-group`

### 8.2 菜单顺序优化

建议按照使用频率排序：
1. **环境管理** - 最基础，使用频率高
2. **数据库配置** - 基础配置，使用频率高
3. **权限管理** - 权限相关功能集中

---

## 九、总结

推荐使用**方案一（权限功能合并）**，将权限相关的4个菜单合并到一个"权限管理"二级菜单下，使菜单结构更清晰，用户体验更好。

